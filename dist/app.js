const socket = io(window.location.origin.replace(/^http/, 'ws'));

// ... (rest of the file remains unchanged)